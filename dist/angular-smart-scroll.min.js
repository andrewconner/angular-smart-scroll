/*! angular-smart-scroll - v0.0.1 - 2014-02-14 */
angular.module("jun.smartScroll",[]).directive("smartScroll",["$rootScope","$window","$timeout",function(a,b,c){"use strict";function d(a){if(a.style){var b=g(a);return e(b.css("overflow"))||e(b.css("overflow-y"))}return!1}function e(a){return"scroll"===a||"auto"===a}function f(a,b){for(;a;){if(b(a))return a;a=a.parentNode}return null}var g=angular.element;return{link:function(e,g,h){var i=f(g[0],d)||b;i=angular.element(i);var j=0;h.infiniteScrollDistance&&e.$watch(h.infiniteScrollDistance,function(a){j=parseInt(a,10)});var k,l=!0,m=!1;h.infiniteScrollDisabled&&e.$watch(h.infiniteScrollDisabled,function(a){l=!a,l&&m&&(m=!1,k())}),k=function(){var b=i[0].scrollHeight,c=i.height(),d=i.scrollTop()+c,f=b-d,g=.9,k=c*j+g;k>=f&&(l?a.$$phase?e.$eval(h.infiniteScroll):e.$apply(h.infiniteScroll):m=!0)};var n=k,o=300,p=b._;p&&"function"==typeof p.throttle&&(n=p.throttle(k,o)),i.on("scroll",n),e.$on("$destroy",function(){i.off("scroll",n)}),c(function(){var a=h.infiniteScrollImmediateCheck;(!a||a&&e.$eval(a))&&k()},0)}}}]);