/*! angular-smart-scroll - v0.0.1 - 2014-02-15 */
angular.module("jun.smartScroll",[]).directive("smartScroll",["$rootScope","$window","$timeout",function(a,b,c){"use strict";function d(a){if(a.style){var b=k(a);return e(b.css("overflow"))||e(b.css("overflow-y"))}return!1}function e(a){return"scroll"===a||"auto"===a}function f(a,b){for(;a;){if(b(a))return a;a=a.parentNode}return null}function g(a,b){return a?"string"==typeof a?h(a,"%")?parseInt(a,10)/100*b:parseInt(a,10):a:0}function h(a,b){return a===b||-1!==a.indexOf(b,a.length-b.length)}function i(a,b){return function(){if(!a.disabled){var c=b[0].scrollHeight,d=b.scrollTop(),e=b.height(),f=d+e,h=c-f,i=.9,j=g(a.distance,e)+i;j>=h&&a.next({scrollHeight:c,scrollTop:d,height:e,scrollBottom:f,remaining:h})}}}function j(a,c){var d=b._;if(!d||"function"!=typeof d.throttle)return c;var e=a.throttle,f=300;switch(typeof e){case"number":f=e;break;case"object":if(e)return null!=e.wait&&(f=e.wait),d.throttle(c,f,e)}return d.throttle(c,f)}var k=angular.element;return{scope:{distance:"=scrollDistance",disabled:"=scrollDisabled",throttle:"=scrollThrottle",next:"&scrollNext"},link:function(a,e){var g=f(e[0],d)||b;g=angular.element(g);var h=i(a,g),k=j(a,h);a.$watch("distance",h),a.$watch("disabled",h),g.on("scroll",k),a.$on("$destroy",function(){g.off("scroll",k)}),c(h)}}}]);